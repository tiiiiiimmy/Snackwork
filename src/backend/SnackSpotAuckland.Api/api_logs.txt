Using launch settings from /Users/ss/Library/CloudStorage/OneDrive-TheUniversityofAuckland/msa/Snackwork/src/backend/SnackSpotAuckland.Api/Properties/launchSettings.json...
Building...
/Users/ss/Library/CloudStorage/OneDrive-TheUniversityofAuckland/msa/Snackwork/src/backend/SnackSpotAuckland.Api/Controllers/V1/AuthController.cs(47,43): warning CS8602: Dereference of a possibly null reference. [/Users/ss/Library/CloudStorage/OneDrive-TheUniversityofAuckland/msa/Snackwork/src/backend/SnackSpotAuckland.Api/SnackSpotAuckland.Api.csproj]
/Users/ss/Library/CloudStorage/OneDrive-TheUniversityofAuckland/msa/Snackwork/src/backend/SnackSpotAuckland.Api/Controllers/V1/AuthController.cs(48,52): warning CS8602: Dereference of a possibly null reference. [/Users/ss/Library/CloudStorage/OneDrive-TheUniversityofAuckland/msa/Snackwork/src/backend/SnackSpotAuckland.Api/SnackSpotAuckland.Api.csproj]
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5011
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime[0]
      Content root path: /Users/ss/Library/CloudStorage/OneDrive-TheUniversityofAuckland/msa/Snackwork/src/backend/SnackSpotAuckland.Api
info: SnackSpotAuckland.Api.Middleware.RequestLoggingMiddleware[0]
      Request 8d211723: POST /api/v1/auth/register from ::1
warn: Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware[3]
      Failed to determine the https port for redirect.
info: SnackSpotAuckland.Api.Controllers.V1.AuthController[0]
      Registration attempt started for email: test123@example.com, username: testuser123
info: SnackSpotAuckland.Api.Controllers.V1.AuthController[0]
      ModelState is valid, proceeding with registration
info: SnackSpotAuckland.Api.Controllers.V1.AuthController[0]
      Calling AuthService.RegisterAsync
info: SnackSpotAuckland.Api.Services.AuthService[0]
      AuthService.RegisterAsync started for email: test123@example.com, username: testuser123
info: SnackSpotAuckland.Api.Services.AuthService[0]
      Checking for existing user with email: test123@example.com or username: testuser123
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[@__ToLower_0='?', @__ToLower_1='?'], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."CreatedAt", u."Email", u."ExperiencePoints", u."Level", u."Location", u."PasswordHash", u."UpdatedAt", u."Username"
      FROM "Users" AS u
      WHERE lower(u."Email") = @__ToLower_0 OR lower(u."Username") = @__ToLower_1
      LIMIT 1
info: SnackSpotAuckland.Api.Services.AuthService[0]
      Existing user check completed. Found existing user: False
info: SnackSpotAuckland.Api.Services.AuthService[0]
      Creating new user with email: test123@example.com, username: testuser123
info: SnackSpotAuckland.Api.Services.AuthService[0]
      Adding user to database context with ID: 68715841-73f4-4ba2-a141-0f96496a1e94
info: SnackSpotAuckland.Api.Services.AuthService[0]
      Saving changes to database
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (213ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Object), @p6='?', @p7='?' (DbType = DateTime), @p8='?'], CommandType='Text', CommandTimeout='30']
      INSERT INTO "Users" ("Id", "CreatedAt", "Email", "ExperiencePoints", "Level", "Location", "PasswordHash", "UpdatedAt", "Username")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
info: SnackSpotAuckland.Api.Services.AuthService[0]
      Database changes saved successfully
info: SnackSpotAuckland.Api.Services.AuthService[0]
      Generating access token for user: 68715841-73f4-4ba2-a141-0f96496a1e94
info: SnackSpotAuckland.Api.Services.AuthService[0]
      Access token generated successfully
info: SnackSpotAuckland.Api.Services.AuthService[0]
      Registration completed successfully for user: 68715841-73f4-4ba2-a141-0f96496a1e94
info: SnackSpotAuckland.Api.Controllers.V1.AuthController[0]
      AuthService.RegisterAsync completed. Success: True, Message: User registered successfully
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "RefreshTokens" ("Id", "CreatedAt", "ExpiresAt", "IpAddress", "IsRevoked", "RevokedAt", "Token", "UserAgent", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
info: SnackSpotAuckland.Api.Middleware.RequestLoggingMiddleware[0]
      Response 8d211723: 201 in 1377ms
info: Microsoft.Hosting.Lifetime[0]
      Application is shutting down...
